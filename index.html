<!DOCTYPE html>

<html>
<head>
    <title>Page Title</title>
    <script src='//code.jquery.com/jquery-2.0.3.min.js'></script>
    <script src='lib/knockout.js'></script>
    <script src='netcdf3.js'></script>
</head>

<body>

    <input data-bind="event: { change: loadVariables }" type="file" id="netcdfFile"/>
    <select data-bind="options: variables, value: selectedVar"></select>
    <script>
        var NcFile = window.netcdf3.NcFile;
        var variables = ko.observableArray([]);

        var viewModel = {
            variables: variables,
            selectedVar: ko.observable(''),
            loadVariables: function () {
                var file = $('input#netcdfFile')[0].files[0];
                if (file === undefined) { return; }
                NcFile.read(file, function (nc) {
                    var i;
                    
                    if (nc.constructor !== NcFile) {
                        alert("Could not open file: " + file.name);
                    }
                    variables.removeAll();
                    for (i in nc.variables) {
                        variables.push(i);
                    }
                });
            }
        };
        ko.applyBindings(viewModel);
    </script>
</body>
</html>
